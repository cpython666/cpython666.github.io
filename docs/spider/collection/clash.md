# Clash 使用步骤和常用配置
![/imgs/spider/clash.png](/imgs/spider/clash.png)

一般使用步骤：
- 复制粘贴订阅导入
- 打开全局模式选择节点
- 打开系统代理
- 有的软件需要打开tun模式

可选配置：
- 开机自启动[打开系统代理之后再开机没打开软件的话会无网络]
- 端口设置[程序调用]
- 外部控制[程序自动化控制，搜索API控制Clash]

## TUN模式

# 🧠 **什么是 Clash 的 TUN 模式？**

一句话解释：

> **TUN 模式 = 让 Clash 接管你的整个网络流量，就像“虚拟网卡代理所有请求”。**

不需要软件自己支持代理、不需要配置系统代理，
**任何程序的流量都会被自动接管、自动分流**。

这和 Windows 的“系统代理”、浏览器代理完全不是一个级别。

---

# 🧩 先理解什么是 *TUN*？

“TUN” 是 Linux/Windows/Mac 的一种虚拟网卡类型，全称：

**TUN = network TUNnel interface**

特点是：

* 是一个虚拟的网络接口（虚拟网卡）
* 所有 IP 层数据都可以重定向到用户态程序
* Clash 可以通过它截获、处理、转发你的网络流量

形象理解：

> **TUN = 把你的电脑网线拔了 → 接到 Clash 上 → Clash 再帮你接出去。**

---

# 🚀 **TUN 模式有什么用？**

## 1. **让所有软件自动走代理（最强功能）**

普通系统代理，只会代理支持 HTTP/SOCKS5 的软件，例如：

* 浏览器
* Python requests（你得自己写 proxies）
* curl（你得带 `--proxy`）

但是很多软件不支持代理，例如：

* 游戏
* APP 客户端
* 内置浏览器
* 某些桌面软件
* 一些自写脚本，甚至你忘记给代理参数

这些软件 **系统代理根本接管不了**。

但 TUN 模式可以：

✔ 强制所有软件的流量都经过 Clash
✔ 包括 TCP、UDP
✔ 包括不支持代理的程序

**这就是为什么 Clash+TUN 模式能让“所有流量自动代理”。**

---

## 2. **对爬虫程序来说的好处**

你的 Python 代码可以：

* 不写 proxies 参数
* 不设置 HTTP/SOCKS
* 不改代码任何地方

也能自动走你当前 Clash 节点。

例如你的 requests 写成这样：

```python
import requests
requests.get("https://www.google.com")
```

**依然会走 Clash。**

这就是为什么很多爬虫开发者特别喜欢开 TUN 模式。

---

## 3. **更强的分流能力（系统代理做不到）**

TUN 能做到：

* Google 走节点 A
* GitHub 走节点 B
* 国内网站直连
* 某些游戏走游戏线路
* 某些 IP 走黑名单线路
* 自定义复杂规则

这些是普通系统代理完全无法做到的。

---

# ⚒️ **TUN 模式内部是怎么工作的？（技术版）**

流程如下：

1. Clash 创建一个 TUN 虚拟网卡
2. 操作系统把所有流量（透明代理）导向这个 TUN
3. 进入 Clash → Clash 按规则处理流量
4. Clash 再决定：

   * 直连
   * 通过节点代理发出
   * 或走其他协议（如 REDIR、SOCKS、HTTP）

这就是一个“透明代理”系统：

**捕获 → 解析 → 代理 → 回包 → 返回给系统 → 软件无感知**

整个过程软件完全不知道你用代理。

---

# 🧪 **为什么它比系统代理强很多？**

| 场景              | 系统代理         | TUN 模式 |
| --------------- | ------------ | ------ |
| 浏览器             | ✔            | ✔      |
| Python requests | 要自己写 proxies | 自动代理   |
| 游戏              | ❌            | ✔      |
| APP 客户端         | ❌            | ✔      |
| 内网穿透            | ❌            | ✔      |
| 分流粒度            | 弱            | 超强     |
| UDP 支持          | 部分支持         | 完整支持   |

结论只有一句：

> **TUN = Clash 的真正完全体。**

---

# ⚠️ 使用 TUN 的注意点

1. Windows 上需要管理员权限
2. 某些 VPN 会冲突
3. 某些公司网络会检测到虚拟网卡
4. 有时需要关闭“系统 DPI 加速”或“游戏加速器”
5. 如果你的爬虫跑在服务器上，不要开 TUN（会代理整个机器）

---

# 🔥 最后一段总结（通俗版）

如果说：

* **系统代理 = 告诉一些软件走代理**
* **TUN 模式 = 强制所有软件都走 Clash，由 Clash 负责接管一切**

那么 TUN 就是：

> **“一键强制全局代理 + 自动分流 + 不修改软件设置的终极代理模式”**
